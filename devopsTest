Q1 - SCENARIO
A car rental company called FastCarz has a .net Web Application and Web API which are recently
migrated from on-premise system to Azure cloud using Azure Web App Service
and Web API Service.
The on-premises system had 3 environments Dev, QA and Prod.
The code repository was maintained in TFS and moved to Azure GIT now. The TFS has daily builds which
triggers every night which build the solution and copy the build package to drop folder.
deployments were done to the respective environment manually. The customer is planning to setup
Azure DevOps Pipeline service for below requirements:

1) The build should trigger as soon as anyone in the dev team checks in code to master branch.
whenever dev team pushes code, we have to enable webhook trigger in github, and provide jenkins URL so that it can communicate to jenknis server and add jenkins user to git repo as collaborator.

In Jenkins, go to the job configuration of the project

In the ‘Build Triggers’ section, select ‘Build when a change is pushed to GitHub’ this will trigger a build whenever dev team pushes code to master branch.

2) There will be test projects which will create and maintained in the solution along the Web and API.
The trigger should build all the 3 projects - Web, API and test.
 The build should not be successful if any test fails.

We can use parametezied trigger plugin to trigger all test jobs Web , API, and test
Mark this build as failure if the triggered build is worse or equal to: FAILURE

3) The deployment of code and artifacts should be automated to Dev environment.
To deploy the code we can use ansible copy module by providing src and dest parameters to copy the generated artifact from jenkins workspace to dev server directory. 

by using Archive the Artifacts post-build action on the build job we can upload the artifact generated to Nexus repository and 
store it by giving group name , application name and version number.

    
4) Upon successful deployment to the Dev environment, deployment should be easily promoted to QA
and Prod through automated process.

we need to use Promoted Builds Plugin to promote the build to higher env's
Check mark Promote builds when
Define Name "Deploy to DEV"
Under Actions use Trigger/call builds on other jobs such as QA and prod
In Projects to build enter the name to your deploy job here

5) The deployments to QA and Prod should be enabled with Approvals from approvers only.
in parameterized trigger  step we need to choose 
Under Criteria check mark Only when manually approved by approvers.
